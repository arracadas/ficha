---
title: "Reporte Estad√≠stico - Temporada Verano 2025"
author: "piztachz"
toc: true
highlight-style: pygments
format: html
title-block-banner: "#f0f3f5"
title-block-banner-color: "indianred"
editor: visual
---

```{r}
#| label: load-packages
#| include: false

## Load libraries
library(tidyverse)
library(patchwork)
library(showtext)
library(waffle)
library(ggtext)
library(colorspace)
library(RColorBrewer)
# par(mar=c(3,4,2,2))
# display.brewer.all()
library(ggthemes)
library(scales)    # For percent formatting
library(forcats)   # For reordering factor levels
library(paletteer) # Color palettes
library(ggrepel)
library(lubridate)

## Load fonts
## Loading Google fonts (https://fonts.google.com/)
font_add_google("Love Ya Like A Sister", "sister")  # text and title
font_add_google("Shadows Into Light Two", "siltwo")
font_add_google("Gloria Hallelujah", "gloria")  # labels
font_add_google("Englebert", "engle")  # labels

## Automatically use showtext to render text
showtext_auto()

# temporada
tempo <- "Temporada verano 2025"

## Load functions
source("./R/ficha_functions.R")

## Load data
path = "./data/20253_summer/"
partida <- readRDS(paste0(path, "ficha_trend_clean.rds"))  # detail of partida
corona <- readRDS(paste0(path, "ficha_corona.rds"))       # aggregate data with total de puntos
box_data <- readRDS(paste0(path, "ficha_box_clean.rds"))  # aggregate data for jugada i.e. ficha night
equipo <- readRDS(paste0(path, "ficha_equipo.rds"))   # aggregate data for desempe√±o de equipo

## Transform data
# order levels from lowest to highest score
jugadorx <- c("Rober", "Kilo", "Jerry", "Piztache", "Jorge") 

# add factor
partida_df <- partida %>% 
  mutate(Jugador = factor(Jugador, levels = jugadorx )) %>% 
  mutate(JugadaMes = month(Fecha, label = TRUE))

# add factor
corona_df <- corona %>% 
  mutate(Jugador = factor(Jugador, levels = jugadorx))

# add factor
box_df <- box_data %>%
  filter(Temporada %in% c("Spring 2025", "Summer 2025")) %>% 
  mutate(Jugador = factor(Jugador, levels = jugadorx))

```

## La Ficha

La interacci√≥n estrat√©gica es el concepto central que da vida a la teor√≠a de juegos. Describe la forma en que las decisiones tomadas por un jugador en un escenario son moldeadas por las decisiones de los dem√°s y tienen un impacto en ellas. A diferencia de la toma de decisiones aislada, en la que las decisiones se toman independientemente de las acciones o respuestas de los dem√°s, la interacci√≥n estrat√©gica implica la conciencia constante de que las acciones de cada participante afectan y son afectadas por las elecciones de todos los dem√°s. Este tipo de interacci√≥n crea una intrincada red de expectativas, predicciones y ajustes, ya que cada jugador busca maximizar sus propios resultados a la luz de lo que cree que otros podr√≠an hacer.

![](assets/fichas_mesa.png){style="float:left; margin-right: 20px; margin-top: 10px;" fig-alt="Juego de domin√≥" height="140"}\
En la interacci√≥n estrat√©gica, los jugadores no act√∫an de forma aleatoria o impulsiva, sino de forma calculada, con intenciones que reflejan sus mejores predicciones sobre las probables respuestas de los dem√°s. Este enfoque contrasta marcadamente con la toma de decisiones est√°ndar, donde las elecciones son en gran medida independientes, sin necesidad de tener en cuenta la posible reacci√≥n de otra persona. A trav√©s de la interacci√≥n estrat√©gica, los jugadores entran en un intercambio din√°mico de movimientos y contramovimientos, que a menudo resulta en un equilibrio estable o un patr√≥n de comportamiento que refleja las preferencias y estrategias combinadas de todos los participantes.

Luis Del Toro. Breve Introducci√≥n a los Fundamentos de la Teor√≠a de Juegos : La guia completa para comprender la estrategia, la toma de decisiones y la resolucion de conflictos (p. 10).

## Campe√≥n de la temporada

![](assets/oso_celta.jpg){fig-alt="Oso vikingo" style="float:right; margin-left: 20px; margin-bottom: 10px;" width="206"}

¬°Ah, qu√© pedazo de temporada nos dej√≥ el Verano 2025 en la CDMX, compadres! Resulta que el **Oso Celta** ‚Äîaka **PetaGeorgio**, aka **Gummy Bear**‚Äî se plant√≥ en la cancha de domin√≥ como si fuera **Thor con resaca**, pero en vez de martillo, tra√≠a fichas y una actitud de *"aqu√≠ mando yo, y si no les gusta, aguantense"*.

Diez semanas de **guerra sin cuartel**, de **sangre, sudor y m√°s sudor** (porque en esta ciudad hasta el aire acondicionado se rinde), y el Oso Mandil√≥n **gobern√≥ el tablero como un vikingo en su drakkar**, pero en vez de navegar mares brav√≠os, **arras√≥ con rivales como si fueran fichas de pl√°stico en un temblor del 85**. ¬°Y no fue suerte, no! Fue **pura estrategia, mano fr√≠a y ese instinto jarocho** que solo se saca con **taj√≠n, cerveza bien fr√≠a y una paciencia de santo** (o de diablo, seg√∫n a qui√©n le preguntes).

Y as√≠, sin chistar, el Master de las Fichas hizo lo suyo: **se coron√≥ por segunda vez como Campe√≥n Mundial de Domin√≥**, dejando a la competencia **m√°s perdida que turista en Tepito sin Google Maps**. ¬°**Doble corona, doble leyenda**! üèÜüî•

## Marcador Corona

![](assets/banda_ficha_hell.jpg){width="359"}

**Un temporada m√°s, una divertida noche de viernes, un rompecabezas m√°s que ganar! As√≠ cerramos la temporada del verano de 2025.** üòÖüèÜ Aqu√≠ tenemos a los luchadores desde su √∫ltima partida en el inframundo!üçª‚ú®

```{r, fig.width=8, fig.height=3, fig.align='center'}
#| echo: false
#| warning: false
#| message: false
#| column: page-right
#| 

################################
## Summary of the season      ##
## Marcador Corona            ##
################################
# plot heatmap of marcador corona
rk <- marcador_corona(corona_df)

# Ganados en porcentaje
ww <- puntos_acum(partida_df)

# Total de juegos
tdj <- total_juegos(corona_df, tempo)
print(rk + ww + tdj)
```

```{r, fig.width=8, fig.height=5, fig.align='center'}
#| echo: false
#| warning: false
#| message: false
#| column: page-right
################################
## Tendencia por juego        ##
################################
tt <- tendencia(partida_df, tempo)

# create subset of data for each player to later add labels
jugpar1 <- partida_df %>% 
  select(Fecha, Jugador, Partida, PuntosCum) %>% 
  filter(Jugador %in% c("Kilo", "Rober", "Jorge") & Partida == 58)

jugpar2 <- partida_df %>% 
  select(Fecha, Jugador, Partida, PuntosCum) %>% 
  filter(Jugador %in% c("Jerry", "Piztache") & Partida == 52)

jugpar_merged <- bind_rows(jugpar1, jugpar2)

# add labels
tt <- tt +
  geom_label(data = jugpar_merged, aes(label = Jugador)
             ,family = "engle"
             ,size = 6
             ) +
  geom_hline(yintercept = c(-30, 30), linetype = "dotted", color = "gray")

print(tt)
```

## Rendimiento por pareja

Jerry Caim√°n in Piztach Arrakadas se disparan como la pareja m√°s filosa de la temporada!

```{r, fig.width=7, fig.height=5, fig.align='center'}
#| echo: false
#| warning: false
#| message: false
###################################
## Saldo por pareja              ##
## Crosstab                      ##
###################################
# plot table
eqq <- eqq_dmp(equipo, tempo)  
print(eqq)
```

## Saldo de Viernes por Jugador

¬°**Jerry y Kilate, la din√°mita pura!** üí• Los rudos m√°s rudos de la temporada con noches de m√°s de diez puntos! repartiendo cachetadas con guante de oro!

```{r, fig.width=8, fig.height=4, fig.align='center'}
#| echo: false
#| warning: false
#| message: false

###################################
## Saldo por partida y jugador   ##
## Violin plot distribution cool ##
###################################
# get median values
median_values <- aggregate(Saldo ~ Jugador, data = box_df, FUN = median)

# filter outliers
box_outliers <- box_df %>% 
  filter(abs(Saldo) > 10)

# create plot
bx <- saldo_box(box_df, box_outliers, tempo)
print(bx)

```

## El Rosita y m√°s all√°

Aqu√≠ el puntaje de cada juego y una que otra paliza!.

```{r, fig.width=8, fig.height=5, fig.align='center'}
#| echo: false
#| warning: false
#| message: false
####################################
## Puntos por juego y ficha night ##
## plot chart                     ##
####################################
# plot juegos
jj <- juegos_puntos(partida_df, tempo)
print(jj)
```
